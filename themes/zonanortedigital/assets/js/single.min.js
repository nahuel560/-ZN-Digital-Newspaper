var $the_post=jQuery("#the-post"),$postContent=$the_post.find(".entry");$doc.ready(function(){"use strict";function e(e){var i;if(!e)var e=window.event;return e.which?i=3==e.which:e.button&&(i=2==e.button),i}function i(){var e="";return window.getSelection?e=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(e=document.selection.createRange().text),e}if($doc.on("click","#toggle-post-button",function(){return $postContent.toggleClass("is-expanded"),jQuery(this).hide(),!1}),$doc.on("click",".print-share-btn",function(){return window.print(),!1}),tie.responsive_tables&&$the_post.find("table").wrap('<div class="table-is-responsive"></div>'),$doc.on("click",".share-links a:not(.email-share-btn)",function(){var e=jQuery(this).attr("href");return"#"!=e?(window.open(e,"TIEshare","height=450,width=760,resizable=0,toolbar=0,menubar=0,status=0,location=0,scrollbars=0"),!1):void 0}),tie.is_sticky_video&&jQuery("#the-sticky-video").length){var t=jQuery("#the-sticky-video"),s=t.offset().top,o=tie.sticky_desktop?60:0,o=$body.hasClass("admin-bar")?o+32:o,n=Math.floor(s+t.outerHeight()-o),r=$window.width();jQuery(".video-close-btn").click(function(){t.removeClass("video-is-sticky").addClass("stop-sticky")}),$window.on("resize load",function(){if(s=t.offset().top,n=Math.floor(s+t.outerHeight()-o),r=$window.width(),$body.hasClass("has-sidebar")){var e=jQuery(".sidebar"),i=e.width(),l=$body.hasClass("magazine2")&&$body.hasClass("sidebar-right")?40:15,a=$window.width()-(e.offset().left+i);t.find(".featured-area-inner").css({width:i,right:a-l,left:"auto",bottom:"auto",top:o+20})}}).on("scroll",function(){t.hasClass("stop-sticky")||t.toggleClass("video-is-sticky",$window.scrollTop()>n&&r>992).show()})}if(tie.reading_indicator&&$postContent.length){var l=$postContent.height(),a=$window.height();$window.scroll(function(){var e=0,i=$postContent.offset().top,t=$window.scrollTop();t>i&&(e=100*(t-i)/(l-a)),jQuery("#reading-position-indicator").css("width",e+"%")})}var d=jQuery("#check-also-box");if(d.length){tie_animate_element(d);var c=$the_post.outerHeight(),p=!1;$window.scroll(function(){if(!p){var e=$window.scrollTop();e>c?d.addClass("show-check-also"):d.removeClass("show-check-also")}})}jQuery("#check-also-close").on("click",function(){return d.removeClass("show-check-also"),p=!0,!1}),tie.select_share&&($postContent.mousedown(function(t){$body.attr("mouse-top",t.clientY+window.pageYOffset),$body.attr("mouse-left",t.clientX),!e(t)&&i().length&&(jQuery(".fly-text-share").remove(),document.getSelection().removeAllRanges())}),$postContent.mouseup(function(t){var s=(jQuery(t.target),i()),o=s;if(s.length>3&&!e(t)){var n=$body.attr("mouse-top"),r=t.clientY+window.pageYOffset;parseInt(n)<parseInt(r)&&(r=n);var l=$body.attr("mouse-left"),a=t.clientX,d=parseInt(l)+(parseInt(a)-parseInt(l))/2,c=window.location.href.split("?")[0],p=114;s=s.substring(0,p),tie.twitter_username&&(p-=tie.twitter_username.length+2,s=s.substring(0,p),s=s+" @"+tie.twitter_username);var u="";tie.select_share_twitter&&(u+='<a href="https://twitter.com/share?url='+encodeURIComponent(c)+"&text="+encodeURIComponent(s)+"\" class='fa fa-twitter' onclick=\"window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600');return false;\"></a>"),tie.select_share_facebook&&tie.facebook_app_id&&(u+='<a href="https://www.facebook.com/dialog/feed?app_id='+tie.facebook_app_id+"&amp;link="+encodeURIComponent(c)+"&amp;quote="+encodeURIComponent(o)+"\" class='fa fa-facebook' onclick=\"window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600');return false;\"></a>"),tie.select_share_linkedin&&(u+='<a href="https://www.linkedin.com/shareArticle?mini=true&url='+encodeURIComponent(c)+"&summary="+encodeURIComponent(o)+"\" class='fa fa-linkedin' onclick=\"window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600');return false;\"></a>"),tie.select_share_email&&(u+='<a href="mailto:?body='+encodeURIComponent(o)+" "+encodeURIComponent(c)+"\" class='fa fa-envelope' onclick=\"window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;\"></a>"),""!=u&&$body.append('<div class="fly-text-share">'+u+"</div>"),jQuery(".fly-text-share").css({position:"absolute",top:parseInt(r)-60,left:parseInt(d)}).show()}})),$doc.on("mousemove",".taq-user-rate-active",function(e){var i=jQuery(this);if(i.hasClass("rated-done"))return!1;e.offsetX||(e.offsetX=e.clientX-jQuery(e.target).offset().left);var t=e.offsetX,s=i.width(),o=Math.round(t/s*100);i.find(".user-rate-image span").attr("data-user-rate",o).css("width",o+"%")}),$doc.on("click",".taq-user-rate-active",function(){var e=jQuery(this),i=e.parent(),t=i.find(".taq-count"),s=e.attr("data-id"),o=t.text();if(e.hasClass("rated-done")||e.hasClass("rated-in-progress"))return!1;e.addClass("rated-in-progress");var n=e.find(".user-rate-image span").data("user-rate");e.find(".user-rate-image").hide(),e.append('<span class="taq-load">'+tie.ajax_loader+"</span>"),n>=95&&(n=100);var r=5*n/100;return jQuery.post(taqyeem.ajaxurl,{action:"taqyeem_rate_post",post:s,value:r},function(){e.addClass("rated-done").attr("data-rate",n),e.find(".user-rate-image span").width(n+"%"),jQuery(".taq-load").fadeOut(function(){i.find(".taq-score").html(r),t.length?(o=parseInt(o)+1,t.html(o)):i.find("small").hide(),i.find("strong").html(taqyeem.your_rating),e.find(".user-rate-image").fadeIn()})},"html"),!1}),$doc.on("mouseleave",".taq-user-rate-active",function(){var e=jQuery(this);if(e.hasClass("rated-done"))return!1;var i=e.attr("data-rate");e.find(".user-rate-image span").css("width",i+"%")})});
